<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="com.kh.spring.board.model.mapper.BoardMapper">
	
	<insert id="insertBoard"
			parameterType="com.kh.spring.board.model.dto.BoardDTO">
		INSERT INTO
			TB_SPRING_BOARD
			(
			BOARD_TITLE
		   , BOARD_CONTENT
		   , BOARD_WRITER
		   , CHANGE_NAME
		   )
		VALUES
			(
			#{boardTitle}
		  , #{boardContent}
		  , #{boardWriter}
		  , #{changeName}
			)
	</insert>
	
	<sql id="boardColumn">
		SELECT
			BOARD_NO boardNo
		  , BOARD_TITLE boardTitle
		  , BOARD_WRITER boardWriter
		  , COUNT 
		  , TO_CHAR(CREATE_DATE, 'YYYY-MM-DD') as createDate
		  , CHANGE_NAME changeName
	
	</sql>
	
	<select id ="selectBoardList"
			resultType="com.kh.spring.board.model.dto.BoardDTO">
		<include refid="boardColumn"/>
		FROM
			TB_SPRING_BOARD
		WHERE
			STATUS = 'Y'
		ORDER BY
			BOARD_NO DESC
	</select>	
	
	
	<select id ="selectBoard"
			resultType="com.kh.spring.board.model.dto.BoardDTO">
		<include refid="boardColumn"/>
			, BOARD_CONTENT boardContent
		FROM
			TB_SPRING_BOARD
		WHERE
			STATUS = 'Y'
		AND
			BOARD_NO = #{boardNo}
			
	</select>

</mapper>
















